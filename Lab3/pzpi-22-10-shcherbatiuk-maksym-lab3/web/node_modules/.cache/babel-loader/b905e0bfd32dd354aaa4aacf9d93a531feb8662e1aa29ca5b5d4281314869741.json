{"ast":null,"code":"var _jsxFileName = \"D:\\\\Program Files\\\\WebstormProjects\\\\soil_scout\\\\web\\\\src\\\\utils\\\\PrivateRoute.js\",\n  _s = $RefreshSig$();\n// src/components/PrivateRoute.jsx\nimport { useContext, useEffect, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { UserContext } from \"../contexts/UserContext\";\nimport Cookies from 'js-cookie'; // використовується для роботи з куками\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PrivateRoute({\n  children\n}) {\n  _s();\n  const {\n    user,\n    setUser\n  } = useContext(UserContext);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const token = Cookies.get(\"auth_token\"); // отримуємо токен з куків\n    if (token) {\n      // Якщо є токен, перевіряємо його на сервері\n      setUser({\n        token\n      });\n      setLoading(false);\n    } else {\n      setLoading(false);\n    }\n  }, [setUser]);\n\n  // Якщо ще йде перевірка\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 16\n    }, this);\n  }\n\n  // Якщо токен відсутній або користувач не залогінений, перенаправляємо на логін\n  if (!(user !== null && user !== void 0 && user.token)) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 16\n    }, this);\n  }\n\n  // Якщо все ок, показуємо компонент\n  return children;\n}\n_s(PrivateRoute, \"X2B6CFMKLMfS2JOE6/oqHGzpcZA=\");\n_c = PrivateRoute;\nvar _c;\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"names":["useContext","useEffect","useState","Navigate","UserContext","Cookies","jsxDEV","_jsxDEV","PrivateRoute","children","_s","user","setUser","loading","setLoading","token","get","fileName","_jsxFileName","lineNumber","columnNumber","to","_c","$RefreshReg$"],"sources":["D:/Program Files/WebstormProjects/soil_scout/web/src/utils/PrivateRoute.js"],"sourcesContent":["// src/components/PrivateRoute.jsx\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { UserContext } from \"../contexts/UserContext\";\r\nimport Cookies from 'js-cookie'; // використовується для роботи з куками\r\n\r\nexport default function PrivateRoute({ children }) {\r\n    const { user, setUser } = useContext(UserContext);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const token = Cookies.get(\"auth_token\"); // отримуємо токен з куків\r\n        if (token) {\r\n            // Якщо є токен, перевіряємо його на сервері\r\n            setUser({ token });\r\n            setLoading(false);\r\n        } else {\r\n            setLoading(false);\r\n        }\r\n    }, [setUser]);\r\n\r\n    // Якщо ще йде перевірка\r\n    if (loading) {\r\n        return <div>Loading...</div>;\r\n    }\r\n\r\n    // Якщо токен відсутній або користувач не залогінений, перенаправляємо на логін\r\n    if (!user?.token) {\r\n        return <Navigate to=\"/login\" />;\r\n    }\r\n\r\n    // Якщо все ок, показуємо компонент\r\n    return children;\r\n}\r\n"],"mappings":";;AAAA;AACA,SAASA,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACvD,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,WAAW,QAAQ,yBAAyB;AACrD,OAAOC,OAAO,MAAM,WAAW,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEjC,eAAe,SAASC,YAAYA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAC/C,MAAM;IAAEC,IAAI;IAAEC;EAAQ,CAAC,GAAGZ,UAAU,CAACI,WAAW,CAAC;EACjD,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAE5CD,SAAS,CAAC,MAAM;IACZ,MAAMc,KAAK,GAAGV,OAAO,CAACW,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC;IACzC,IAAID,KAAK,EAAE;MACP;MACAH,OAAO,CAAC;QAAEG;MAAM,CAAC,CAAC;MAClBD,UAAU,CAAC,KAAK,CAAC;IACrB,CAAC,MAAM;MACHA,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC,EAAE,CAACF,OAAO,CAAC,CAAC;;EAEb;EACA,IAAIC,OAAO,EAAE;IACT,oBAAON,OAAA;MAAAE,QAAA,EAAK;IAAU;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAChC;;EAEA;EACA,IAAI,EAACT,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEI,KAAK,GAAE;IACd,oBAAOR,OAAA,CAACJ,QAAQ;MAACkB,EAAE,EAAC;IAAQ;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACnC;;EAEA;EACA,OAAOX,QAAQ;AACnB;AAACC,EAAA,CA3BuBF,YAAY;AAAAc,EAAA,GAAZd,YAAY;AAAA,IAAAc,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}