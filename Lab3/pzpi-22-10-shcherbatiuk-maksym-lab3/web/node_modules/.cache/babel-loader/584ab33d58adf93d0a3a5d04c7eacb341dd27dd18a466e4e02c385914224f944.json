{"ast":null,"code":"var _jsxFileName = \"D:\\\\Program Files\\\\WebstormProjects\\\\soil_scout\\\\web\\\\src\\\\utils\\\\PrivateRoute.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { UserContext } from '../contexts/UserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PrivateRoute = ({\n  children\n}) => {\n  _s();\n  const {\n    user,\n    hasDevice,\n    loading\n  } = useContext(UserContext);\n  const [alertShown, setAlertShown] = useState(false);\n  useEffect(() => {\n    if (!loading && user && !hasDevice && !alertShown) {\n      alert('Придбайте спочатку девайс');\n      setAlertShown(true);\n    }\n  }, [loading, user, hasDevice, alertShown]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 16\n    }, this);\n  }\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 16\n    }, this);\n  }\n  if (!hasDevice) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/buy-device\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 16\n    }, this);\n  }\n  return children;\n};\n_s(PrivateRoute, \"+Kt68RAGGOuqm1ZN9FJRwFsc1Rs=\");\n_c = PrivateRoute;\nexport default PrivateRoute;\nvar _c;\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"names":["React","useContext","useEffect","useState","Navigate","UserContext","jsxDEV","_jsxDEV","PrivateRoute","children","_s","user","hasDevice","loading","alertShown","setAlertShown","alert","fileName","_jsxFileName","lineNumber","columnNumber","to","replace","_c","$RefreshReg$"],"sources":["D:/Program Files/WebstormProjects/soil_scout/web/src/utils/PrivateRoute.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { UserContext } from '../contexts/UserContext';\r\n\r\nconst PrivateRoute = ({ children }) => {\r\n    const { user, hasDevice, loading } = useContext(UserContext);\r\n    const [alertShown, setAlertShown] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (!loading && user && !hasDevice && !alertShown) {\r\n            alert('Придбайте спочатку девайс');\r\n            setAlertShown(true);\r\n        }\r\n    }, [loading, user, hasDevice, alertShown]);\r\n\r\n    if (loading) {\r\n        return <div>Завантаження...</div>;\r\n    }\r\n\r\n    if (!user) {\r\n        return <Navigate to=\"/login\" replace />;\r\n    }\r\n\r\n    if (!hasDevice) {\r\n        return <Navigate to=\"/buy-device\" replace />;\r\n    }\r\n\r\n    return children;\r\n};\r\n\r\nexport default PrivateRoute;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC9D,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,WAAW,QAAQ,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtD,MAAMC,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACnC,MAAM;IAAEC,IAAI;IAAEC,SAAS;IAAEC;EAAQ,CAAC,GAAGZ,UAAU,CAACI,WAAW,CAAC;EAC5D,MAAM,CAACS,UAAU,EAAEC,aAAa,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAEnDD,SAAS,CAAC,MAAM;IACZ,IAAI,CAACW,OAAO,IAAIF,IAAI,IAAI,CAACC,SAAS,IAAI,CAACE,UAAU,EAAE;MAC/CE,KAAK,CAAC,2BAA2B,CAAC;MAClCD,aAAa,CAAC,IAAI,CAAC;IACvB;EACJ,CAAC,EAAE,CAACF,OAAO,EAAEF,IAAI,EAAEC,SAAS,EAAEE,UAAU,CAAC,CAAC;EAE1C,IAAID,OAAO,EAAE;IACT,oBAAON,OAAA;MAAAE,QAAA,EAAK;IAAe;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EACrC;EAEA,IAAI,CAACT,IAAI,EAAE;IACP,oBAAOJ,OAAA,CAACH,QAAQ;MAACiB,EAAE,EAAC,QAAQ;MAACC,OAAO;IAAA;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC3C;EAEA,IAAI,CAACR,SAAS,EAAE;IACZ,oBAAOL,OAAA,CAACH,QAAQ;MAACiB,EAAE,EAAC,aAAa;MAACC,OAAO;IAAA;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAChD;EAEA,OAAOX,QAAQ;AACnB,CAAC;AAACC,EAAA,CAxBIF,YAAY;AAAAe,EAAA,GAAZf,YAAY;AA0BlB,eAAeA,YAAY;AAAC,IAAAe,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}