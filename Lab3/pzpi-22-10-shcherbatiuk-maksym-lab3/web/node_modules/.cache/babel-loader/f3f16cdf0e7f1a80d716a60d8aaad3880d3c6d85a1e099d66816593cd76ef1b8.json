{"ast":null,"code":"var _jsxFileName = \"D:\\\\Program Files\\\\WebstormProjects\\\\soil_scout\\\\web\\\\src\\\\components\\\\AnalyticsField.jsx\",\n  _s = $RefreshSig$();\n// src/components/AnalyticsField.js\nimport React, { useEffect, useState, useRef } from 'react'; // Import useRef\n// ✅ Виправлено імпорт Chartist: імпортуємо іменовані експорти\nimport Chartist from 'chartist';\n\n// ✅ Виправлено шлях імпорту CSS - спробуємо стандартний шлях\nimport 'chartist/dist/chartist.css';\nimport api from '../utils/api';\n// useFieldContext більше не потрібен тут\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AnalyticsField = ({\n  selectedFieldId\n}) => {\n  _s();\n  const [timeRange, setTimeRange] = useState('7d'); // Стан для діапазону часу\n  const [chartData, setChartData] = useState(null); // Стан для даних графіка\n  const [isLoading, setIsLoading] = useState(false); // Стан для індикатора завантаження\n  const [error, setError] = useState(null); // Стан для помилки\n\n  // ✅ Ref to the chart container element\n  const chartContainerRef = useRef(null);\n  // ✅ Ref to store the Chartist instance\n  const chartInstanceRef = useRef(null);\n\n  // Функції для backend select/deselect (як раніше модифіковано)\n  // ID поля не передається в тілі запиту\n  const selectField = async () => {\n    try {\n      console.log(`Відправка запиту на select поточного поля.`);\n      await api.post('/fields/select/');\n      console.log(`Поле успішно вибрано (визначено на сервері).`);\n    } catch (err) {\n      console.error(`Не вдалося вибрати поле на сервері:`, err);\n    }\n  };\n  const deselectField = async () => {\n    try {\n      console.log(`Відправка запиту на deselect поточного поля.`);\n      await api.post('/fields/deselect/');\n      console.log(`Поле успішно деселектнуто (визначено на сервері).`);\n    } catch (err) {\n      console.error(`Не вдалося деселектнути поле на сервері:`, err);\n    }\n  };\n\n  // Ефект для завантаження даних та керування станом \"вибраності\" поля\n  useEffect(() => {\n    if (!selectedFieldId) {\n      setChartData(null);\n      setError(null);\n      setIsLoading(false);\n      return;\n    }\n    selectField(); // Викликаємо selectField без аргументів\n\n    setIsLoading(true);\n    setError(null);\n    const apiUrl = `/field-measurements/chart/${selectedFieldId}/${timeRange}`;\n    api.get(apiUrl).then(response => {\n      // Припускаємо, що response.data є в Chartist сумісному форматі: { labels: [...], series: [...] }\n      setChartData(response.data);\n      setIsLoading(false);\n    }).catch(err => {\n      console.error('Error fetching chart data:', err);\n      setError('Не вдалося завантажити дані графіка.');\n      setChartData(null);\n      setIsLoading(false);\n    });\n\n    // Cleanup function to deselect the field\n    return () => {\n      // При демонтажі компонента або зміні selectedFieldId, деселектимо поле\n      deselectField(); // Викликаємо deselectField без аргументів\n    };\n  }, [selectedFieldId, timeRange]); // Залежності\n\n  // ✅ Ефект для рендерингу графіка, коли chartData змінюється\n  useEffect(() => {\n    // Перевіряємо, чи є дані, чи є контейнер, і чи не завантажуємо/немає помилки\n    if (chartData && chartContainerRef.current && !isLoading && !error) {\n      // Знищуємо попередній екземпляр графіка, якщо він існує\n      if (chartInstanceRef.current) {\n        chartInstanceRef.current.detach();\n      }\n\n      // ✅ Визначаємо опції для Chartist (можна налаштувати)\n      const options = {\n        low: 0,\n        // Початок осі Y від 0\n        // showArea: true, // Показати область під лінією\n        // showPoint: false, // Приховати точки на лінії\n        fullWidth: true,\n        // Використовувати всю ширину контейнера\n        chartPadding: {\n          // Додати відступи\n          right: 40\n        },\n        axisX: {\n          // Приклад форматування міток осі X, якщо labels - дати/час\n          labelOffset: {\n            x: 0,\n            y: 5\n          }\n          // labelInterpolationFnc: function(value, index) {\n          //    // Можна форматувати дати тут, наприклад, moment(value).format('DD.MM')\n          //    return value; // За замовчуванням просто повертає значення\n          // }\n        },\n        axisY: {\n          labelInterpolationFnc: function (value) {\n            // Можна додати одиниці виміру, якщо вони відомі (напр., value + ' %')\n            return value;\n          },\n          offset: 40 // Збільшити відступ для міток осі Y, якщо вони довгі\n        }\n      };\n\n      // ✅ Створюємо новий екземпляр LineChart\n      chartInstanceRef.current = new LineChart(\n      // Використовуємо імпортований LineChart\n      chartContainerRef.current,\n      // Передаємо посилання на DOM-елемент\n      chartData,\n      // Передаємо отримані дані\n      options // Передаємо опції\n      );\n\n      // Необов'язково: Повторно застосувати анімації, якщо потрібно (адаптуємо з вашого HTML)\n      // Приклад анімації для ліній/областей\n      chartInstanceRef.current.on('draw', function (data) {\n        if (data.type === 'line' || data.type === 'area') {\n          data.element.animate({\n            d: {\n              begin: 1000 * data.index,\n              dur: 1000,\n              // ✅ Використовуємо Svg.Easing замість Chartist.Svg.Easing\n              from: data.path.clone().scale(1, 0).translate(0, data.chartRect.height()).stringify(),\n              to: data.path.clone().stringify(),\n              easing: Svg.Easing.easeOutQuint // Використовуємо імпортований Svg\n            }\n          });\n        }\n      });\n\n      // ✅ Додано умову для знищення графіка, якщо дані стають порожніми/null\n    } else if ((!chartData || Array.isArray(chartData.series) && chartData.series.every(s => s.length === 0) || Array.isArray(chartData.labels) && chartData.labels.length === 0 // Немає даних\n    ) && chartInstanceRef.current // Існує екземпляр графіка\n    ) {\n      // Якщо дані порожні/null (існуючий графік), знищуємо його\n      chartInstanceRef.current.detach();\n      chartInstanceRef.current = null; // Очищаємо реф\n    }\n\n    // ✅ Cleanup функція для екземпляра графіка\n    return () => {\n      if (chartInstanceRef.current) {\n        chartInstanceRef.current.detach(); // Знищуємо екземпляр графіка при демонтажі\n        chartInstanceRef.current = null; // Очищаємо реф\n      }\n    };\n  }, [chartData, isLoading, error]); // Залежності: перезапускаємо ефект при зміні даних, стану завантаження чи помилки\n\n  // ✅ Функція для зміни діапазону часу (залишається без змін)\n  const handleTimeRangeChange = newTimeRange => {\n    setTimeRange(newTimeRange);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"main-content\",\n    className: \"w-full flex-1\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-1 flex-wrap\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full xl:w-2/3 p-6 xl:max-w-6xl\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-full lg:max-w-3xl xl:max-w-5xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-b p-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"font-bold text-black\",\n              children: [\"\\u0413\\u0440\\u0430\\u0444\\u0456\\u043A \\u0432\\u0438\\u043C\\u0456\\u0440\\u044E\\u0432\\u0430\\u043D\\u044C \", selectedFieldId ? `для поля ID: ${selectedFieldId}` : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-4 mt-2\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleTimeRangeChange('7d'),\n                className: `px-3 py-1 text-sm rounded ${timeRange === '7d' ? 'bg-indigo-500 text-white' : 'bg-gray-300 text-gray-800'}`,\n                children: \"7 \\u0434\\u043D\\u0456\\u0432\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleTimeRangeChange('6m'),\n                className: `px-3 py-1 text-sm rounded ${timeRange === '6m' ? 'bg-indigo-500 text-white' : 'bg-gray-300 text-gray-800'}`,\n                children: \"6 \\u043C\\u0456\\u0441\\u044F\\u0446\\u0456\\u0432\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleTimeRangeChange('1y'),\n                className: `px-3 py-1 text-sm rounded ${timeRange === '1y' ? 'bg-indigo-500 text-white' : 'bg-gray-300 text-gray-800'}`,\n                children: \"1 \\u0440\\u0456\\u043A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-5\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ct-chart ct-golden-section\",\n              id: \"chart1\",\n              ref: chartContainerRef,\n              children: [!selectedFieldId && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center text-gray-500\",\n                children: \"\\u0411\\u0443\\u0434\\u044C \\u043B\\u0430\\u0441\\u043A\\u0430, \\u043E\\u0431\\u0435\\u0440\\u0456\\u0442\\u044C \\u043F\\u043E\\u043B\\u0435 \\u0437\\u0456 \\u0441\\u043F\\u0438\\u0441\\u043A\\u0443 \\u043B\\u0456\\u0432\\u043E\\u0440\\u0443\\u0447, \\u0449\\u043E\\u0431 \\u043F\\u043E\\u0431\\u0430\\u0447\\u0438\\u0442\\u0438 \\u0433\\u0440\\u0430\\u0444\\u0456\\u043A.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 37\n              }, this), selectedFieldId && isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center text-gray-500\",\n                children: \"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F \\u0434\\u0430\\u043D\\u0438\\u0445 \\u0433\\u0440\\u0430\\u0444\\u0456\\u043A\\u0430...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 37\n              }, this), selectedFieldId && error && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center text-red-500\",\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 37\n              }, this), selectedFieldId && !isLoading && !error && (!chartData || Array.isArray(chartData.series) && chartData.series.every(s => s.length === 0) || Array.isArray(chartData.labels) && chartData.labels.length === 0) && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center text-gray-500\",\n                children: \"\\u0414\\u0430\\u043D\\u0456 \\u0434\\u043B\\u044F \\u043E\\u0431\\u0440\\u0430\\u043D\\u043E\\u0433\\u043E \\u043F\\u043E\\u043B\\u044F \\u0437\\u0430 \\u0446\\u0435\\u0439 \\u043F\\u0435\\u0440\\u0456\\u043E\\u0434 \\u043D\\u0435 \\u0437\\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u0456.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-b p-3\",\n              children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"font-bold text-black\",\n                children: \"Table\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-5\",\n              children: [/*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"w-full p-5 text-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"text-left text-blue-900\",\n                      children: \"Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"text-left text-blue-900\",\n                      children: \"Side\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 239,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"text-left text-blue-900\",\n                      children: \"Role\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 240,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Obi Wan Kenobi\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 245,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Light\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 246,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Jedi\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 247,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Greedo\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 250,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"South\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 251,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Scumbag\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 252,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Darth Vader\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 255,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Dark\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 256,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Sith\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 257,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"py-2\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"#\",\n                  children: \"See More issues...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 53\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full xl:w-1/3 p-6 xl:max-w-4xl border-l-1 border-gray-300\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-sm lg:max-w-3xl xl:max-w-5xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-b p-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"font-bold text-black\",\n              children: \"Graph 2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 29\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-5\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ct-chart ct-golden-section\",\n              id: \"chart2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-b p-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"font-bold text-black\",\n              children: \"Graph 3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 29\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-5\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ct-chart ct-golden-section\",\n              id: \"chart3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-b p-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"font-bold text-black\",\n              children: \"Graph 4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 29\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-5\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ct-chart ct-golden-section\",\n              id: \"chart4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-b p-3\",\n              children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"font-bold text-black\",\n                children: \"Template\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 172,\n    columnNumber: 9\n  }, this);\n};\n_s(AnalyticsField, \"21q/O0tyMsN+mSgQhqNTdAPkCmw=\");\n_c = AnalyticsField;\nexport default AnalyticsField;\nvar _c;\n$RefreshReg$(_c, \"AnalyticsField\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Chartist","api","jsxDEV","_jsxDEV","AnalyticsField","selectedFieldId","_s","timeRange","setTimeRange","chartData","setChartData","isLoading","setIsLoading","error","setError","chartContainerRef","chartInstanceRef","selectField","console","log","post","err","deselectField","apiUrl","get","then","response","data","catch","current","detach","options","low","fullWidth","chartPadding","right","axisX","labelOffset","x","y","axisY","labelInterpolationFnc","value","offset","LineChart","on","type","element","animate","d","begin","index","dur","from","path","clone","scale","translate","chartRect","height","stringify","to","easing","Svg","Easing","easeOutQuint","Array","isArray","series","every","s","length","labels","handleTimeRangeChange","newTimeRange","id","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","href","_c","$RefreshReg$"],"sources":["D:/Program Files/WebstormProjects/soil_scout/web/src/components/AnalyticsField.jsx"],"sourcesContent":["// src/components/AnalyticsField.js\r\nimport React, { useEffect, useState, useRef } from 'react'; // Import useRef\r\n// ✅ Виправлено імпорт Chartist: імпортуємо іменовані експорти\r\nimport Chartist from 'chartist';\r\n\r\n// ✅ Виправлено шлях імпорту CSS - спробуємо стандартний шлях\r\nimport 'chartist/dist/chartist.css';\r\n\r\n\r\nimport api from '../utils/api';\r\n// useFieldContext більше не потрібен тут\r\n\r\nconst AnalyticsField = ({ selectedFieldId }) => {\r\n    const [timeRange, setTimeRange] = useState('7d'); // Стан для діапазону часу\r\n    const [chartData, setChartData] = useState(null); // Стан для даних графіка\r\n    const [isLoading, setIsLoading] = useState(false); // Стан для індикатора завантаження\r\n    const [error, setError] = useState(null); // Стан для помилки\r\n\r\n    // ✅ Ref to the chart container element\r\n    const chartContainerRef = useRef(null);\r\n    // ✅ Ref to store the Chartist instance\r\n    const chartInstanceRef = useRef(null);\r\n\r\n    // Функції для backend select/deselect (як раніше модифіковано)\r\n    // ID поля не передається в тілі запиту\r\n    const selectField = async () => {\r\n        try {\r\n            console.log(`Відправка запиту на select поточного поля.`);\r\n            await api.post('/fields/select/');\r\n            console.log(`Поле успішно вибрано (визначено на сервері).`);\r\n        } catch (err) {\r\n            console.error(`Не вдалося вибрати поле на сервері:`, err);\r\n        }\r\n    };\r\n\r\n    const deselectField = async () => {\r\n        try {\r\n            console.log(`Відправка запиту на deselect поточного поля.`);\r\n            await api.post('/fields/deselect/');\r\n            console.log(`Поле успішно деселектнуто (визначено на сервері).`);\r\n        } catch (err) {\r\n            console.error(`Не вдалося деселектнути поле на сервері:`, err);\r\n        }\r\n    };\r\n\r\n\r\n    // Ефект для завантаження даних та керування станом \"вибраності\" поля\r\n    useEffect(() => {\r\n        if (!selectedFieldId) {\r\n            setChartData(null);\r\n            setError(null);\r\n            setIsLoading(false);\r\n            return;\r\n        }\r\n\r\n        selectField(); // Викликаємо selectField без аргументів\r\n\r\n        setIsLoading(true);\r\n        setError(null);\r\n        const apiUrl = `/field-measurements/chart/${selectedFieldId}/${timeRange}`;\r\n\r\n        api.get(apiUrl)\r\n            .then(response => {\r\n                // Припускаємо, що response.data є в Chartist сумісному форматі: { labels: [...], series: [...] }\r\n                setChartData(response.data);\r\n                setIsLoading(false);\r\n            })\r\n            .catch(err => {\r\n                console.error('Error fetching chart data:', err);\r\n                setError('Не вдалося завантажити дані графіка.');\r\n                setChartData(null);\r\n                setIsLoading(false);\r\n            });\r\n\r\n        // Cleanup function to deselect the field\r\n        return () => {\r\n            // При демонтажі компонента або зміні selectedFieldId, деселектимо поле\r\n            deselectField(); // Викликаємо deselectField без аргументів\r\n        };\r\n\r\n    }, [selectedFieldId, timeRange]); // Залежності\r\n\r\n    // ✅ Ефект для рендерингу графіка, коли chartData змінюється\r\n    useEffect(() => {\r\n        // Перевіряємо, чи є дані, чи є контейнер, і чи не завантажуємо/немає помилки\r\n        if (chartData && chartContainerRef.current && !isLoading && !error) {\r\n            // Знищуємо попередній екземпляр графіка, якщо він існує\r\n            if (chartInstanceRef.current) {\r\n                chartInstanceRef.current.detach();\r\n            }\r\n\r\n            // ✅ Визначаємо опції для Chartist (можна налаштувати)\r\n            const options = {\r\n                low: 0, // Початок осі Y від 0\r\n                // showArea: true, // Показати область під лінією\r\n                // showPoint: false, // Приховати точки на лінії\r\n                fullWidth: true, // Використовувати всю ширину контейнера\r\n                chartPadding: { // Додати відступи\r\n                    right: 40\r\n                },\r\n                axisX: {\r\n                    // Приклад форматування міток осі X, якщо labels - дати/час\r\n                    labelOffset: {\r\n                        x: 0,\r\n                        y: 5\r\n                    }\r\n                    // labelInterpolationFnc: function(value, index) {\r\n                    //    // Можна форматувати дати тут, наприклад, moment(value).format('DD.MM')\r\n                    //    return value; // За замовчуванням просто повертає значення\r\n                    // }\r\n                },\r\n                axisY: {\r\n                    labelInterpolationFnc: function(value) {\r\n                        // Можна додати одиниці виміру, якщо вони відомі (напр., value + ' %')\r\n                        return value;\r\n                    },\r\n                    offset: 40 // Збільшити відступ для міток осі Y, якщо вони довгі\r\n                }\r\n            };\r\n\r\n            // ✅ Створюємо новий екземпляр LineChart\r\n            chartInstanceRef.current = new LineChart( // Використовуємо імпортований LineChart\r\n                chartContainerRef.current, // Передаємо посилання на DOM-елемент\r\n                chartData, // Передаємо отримані дані\r\n                options // Передаємо опції\r\n            );\r\n\r\n            // Необов'язково: Повторно застосувати анімації, якщо потрібно (адаптуємо з вашого HTML)\r\n            // Приклад анімації для ліній/областей\r\n            chartInstanceRef.current.on('draw', function(data) {\r\n                if (data.type === 'line' || data.type === 'area') {\r\n                    data.element.animate({\r\n                        d: {\r\n                            begin: 1000 * data.index,\r\n                            dur: 1000,\r\n                            // ✅ Використовуємо Svg.Easing замість Chartist.Svg.Easing\r\n                            from: data.path.clone().scale(1, 0).translate(0, data.chartRect.height()).stringify(),\r\n                            to: data.path.clone().stringify(),\r\n                            easing: Svg.Easing.easeOutQuint // Використовуємо імпортований Svg\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            // ✅ Додано умову для знищення графіка, якщо дані стають порожніми/null\r\n        } else if (\r\n            (!chartData || (Array.isArray(chartData.series) && chartData.series.every(s => s.length === 0)) || (Array.isArray(chartData.labels) && chartData.labels.length === 0)) // Немає даних\r\n            && chartInstanceRef.current // Існує екземпляр графіка\r\n        ) {\r\n            // Якщо дані порожні/null (існуючий графік), знищуємо його\r\n            chartInstanceRef.current.detach();\r\n            chartInstanceRef.current = null; // Очищаємо реф\r\n        }\r\n\r\n        // ✅ Cleanup функція для екземпляра графіка\r\n        return () => {\r\n            if (chartInstanceRef.current) {\r\n                chartInstanceRef.current.detach(); // Знищуємо екземпляр графіка при демонтажі\r\n                chartInstanceRef.current = null; // Очищаємо реф\r\n            }\r\n        };\r\n\r\n    }, [chartData, isLoading, error]); // Залежності: перезапускаємо ефект при зміні даних, стану завантаження чи помилки\r\n\r\n\r\n    // ✅ Функція для зміни діапазону часу (залишається без змін)\r\n    const handleTimeRangeChange = (newTimeRange) => {\r\n        setTimeRange(newTimeRange);\r\n    };\r\n\r\n    return (\r\n        <div id=\"main-content\" className=\"w-full flex-1\">\r\n            <div className=\"flex flex-1 flex-wrap\">\r\n                {/* Злегка відкоригована ширина */}\r\n                <div className=\"w-full xl:w-2/3 p-6 xl:max-w-6xl\">\r\n                    {/* \"Контейнер\" для графіків*/}\r\n                    <div className=\"max-w-full lg:max-w-3xl xl:max-w-5xl\">\r\n\r\n                        {/*Card для графіка*/}\r\n                        <div className=\"border-b p-3\">\r\n                            {/* Відображаємо ID поля, якщо воно вибрано */}\r\n                            <h5 className=\"font-bold text-black\">Графік вимірювань {selectedFieldId ? `для поля ID: ${selectedFieldId}` : ''}</h5>\r\n                            {/* Кнопки вибору масштабування */}\r\n                            <div className=\"flex space-x-4 mt-2\"> {/* Додано mt-2 для відступу */}\r\n                                <button\r\n                                    onClick={() => handleTimeRangeChange('7d')}\r\n                                    className={`px-3 py-1 text-sm rounded ${timeRange === '7d' ? 'bg-indigo-500 text-white' : 'bg-gray-300 text-gray-800'}`}\r\n                                >\r\n                                    7 днів\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => handleTimeRangeChange('6m')}\r\n                                    className={`px-3 py-1 text-sm rounded ${timeRange === '6m' ? 'bg-indigo-500 text-white' : 'bg-gray-300 text-gray-800'}`}\r\n                                >\r\n                                    6 місяців\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => handleTimeRangeChange('1y')}\r\n                                    className={`px-3 py-1 text-sm rounded ${timeRange === '1y' ? 'bg-indigo-500 text-white' : 'bg-gray-300 text-gray-800'}`}\r\n                                >\r\n                                    1 рік\r\n                                </button>\r\n                                {/* Можна додати кнопку \"Весь час\", якщо потрібно */}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"p-5\">\r\n                            {/* ✅ Призначаємо ref для div контейнера графіка */}\r\n                            <div className=\"ct-chart ct-golden-section\" id=\"chart1\" ref={chartContainerRef}>\r\n                                {/* ✅ Відображаємо повідомлення умовно. Графік буде намальовано тут Chartist-ом */}\r\n                                {!selectedFieldId && (\r\n                                    <p className=\"text-center text-gray-500\">Будь ласка, оберіть поле зі списку ліворуч, щоб побачити графік.</p>\r\n                                )}\r\n                                {selectedFieldId && isLoading && (\r\n                                    <p className=\"text-center text-gray-500\">Завантаження даних графіка...</p>\r\n                                )}\r\n                                {selectedFieldId && error && (\r\n                                    <p className=\"text-center text-red-500\">{error}</p>\r\n                                )}\r\n                                {/* Показуємо повідомлення про відсутність даних, тільки якщо поле вибрано, не завантажується, немає помилок, і дані порожні/відсутні */}\r\n                                {selectedFieldId && !isLoading && !error && (!chartData || (Array.isArray(chartData.series) && chartData.series.every(s => s.length === 0)) || (Array.isArray(chartData.labels) && chartData.labels.length === 0)) && (\r\n                                    <p className=\"text-center text-gray-500\">Дані для обраного поля за цей період не знайдені.</p>\r\n                                )}\r\n                                {/* Графік Chartist буде рендеритися *всередині* цього div */}\r\n                            </div>\r\n                        </div>\r\n                        {/*/Card для графіка*/}\r\n\r\n                        {/* Card для таблиці - залишаємо як є */}\r\n                        {/* TODO: Можливо, зробити цю таблицю динамічною з даними обраного поля? */}\r\n                        <div className=\"p-3\">\r\n                            <div className=\"border-b p-3\">\r\n                                <h5 className=\"font-bold text-black\">Table</h5>\r\n                            </div>\r\n                            <div className=\"p-5\">\r\n                                <table className=\"w-full p-5 text-gray-700\">\r\n                                    <thead>\r\n                                    <tr>\r\n                                        <th className=\"text-left text-blue-900\">Name</th>\r\n                                        <th className=\"text-left text-blue-900\">Side</th>\r\n                                        <th className=\"text-left text-blue-900\">Role</th>\r\n                                    </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                    <tr>\r\n                                        <td>Obi Wan Kenobi</td>\r\n                                        <td>Light</td>\r\n                                        <td>Jedi</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Greedo</td>\r\n                                        <td>South</td>\r\n                                        <td>Scumbag</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Darth Vader</td>\r\n                                        <td>Dark</td>\r\n                                        <td>Sith</td>\r\n                                    </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                                <p className=\"py-2\"><a href=\"#\">See More issues...</a></p>\r\n                            </div>\r\n                        </div>\r\n                        {/*/table Card*/}\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                {/* Друга колонка - залишаємо як є */}\r\n                {/* TODO: Ці додаткові графіки (#chart2, #chart3, #chart4) - це жорстко закодовані приклади.\r\n                         Якщо вам потрібні динамічні графіки для різних типів сенсорів або даних,\r\n                         потрібно буде отримати більше даних і створити окремі екземпляри Chartist\r\n                         або компонент з кількома графіками. Наразі це просто порожні div-и. */}\r\n                <div className=\"w-full xl:w-1/3 p-6 xl:max-w-4xl border-l-1 border-gray-300\">\r\n\r\n                    {/* \"Контейнер\" для графіків*/}\r\n                    <div className=\"max-w-sm lg:max-w-3xl xl:max-w-5xl\">\r\n\r\n                        {/*Card для графіка*/}\r\n                        <div className=\"border-b p-3\">\r\n                            <h5 className=\"font-bold text-black\">Graph 2</h5> {/* Названо інакше */}\r\n                        </div>\r\n                        <div className=\"p-5\">\r\n                            {/* ✅ Цим div-ам також потрібні будуть refs, якщо ви захочете в них малювати графіки */}\r\n                            <div className=\"ct-chart ct-golden-section\" id=\"chart2\"></div>\r\n                        </div>\r\n                        {/*/Card для графіка*/}\r\n\r\n                        {/*Card для графіка*/}\r\n                        <div className=\"border-b p-3\">\r\n                            <h5 className=\"font-bold text-black\">Graph 3</h5> {/* Названо інакше */}\r\n                        </div>\r\n                        <div className=\"p-5\">\r\n                            {/* ✅ Цим div-ам також потрібні будуть refs, якщо ви захочете в них малювати графіки */}\r\n                            <div className=\"ct-chart ct-golden-section\" id=\"chart3\"></div>\r\n                        </div>\r\n                        {/*/Card для графіка*/}\r\n\r\n                        {/*Card для графіка*/}\r\n                        <div className=\"border-b p-3\">\r\n                            <h5 className=\"font-bold text-black\">Graph 4</h5> {/* Названо інакше */}\r\n                        </div>\r\n                        <div className=\"p-5\">\r\n                            {/* ✅ Цим div-ам також потрібні будуть refs, якщо ви захочете в них малювати графіки */}\r\n                            <div className=\"ct-chart ct-golden-section\" id=\"chart4\"></div>\r\n                        </div>\r\n                        {/*/Card для графіка*/}\r\n\r\n                        {/*Template Card - залишаємо як є */}\r\n                        <div className=\"p-3\">\r\n                            <div className=\"border-b p-3\">\r\n                                <h5 className=\"font-bold text-black\">Template</h5>\r\n                            </div>\r\n                            <div className=\"p-5\">\r\n\r\n                            </div>\r\n                        </div>\r\n                        {/*/Template Card*/}\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default AnalyticsField;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}