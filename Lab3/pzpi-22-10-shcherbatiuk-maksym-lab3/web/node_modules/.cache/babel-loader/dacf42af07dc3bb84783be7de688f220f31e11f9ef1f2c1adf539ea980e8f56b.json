{"ast":null,"code":"var _jsxFileName = \"D:\\\\Program Files\\\\WebstormProjects\\\\soil_scout\\\\web\\\\src\\\\contexts\\\\UserContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Cookies from 'js-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/createContext(null);\nexport function UserProvider({\n  children\n}) {\n  _s();\n  const [user, setUser] = useState(null);\n  const navigate = useNavigate();\n\n  // Приклад для перевірки наявності токену\n  const checkToken = () => {\n    const token = Cookies.get(\"auth_token\"); // Перевірка наявності куки\n    if (!token) {\n      logout();\n      return false;\n    }\n    return true;\n  };\n  useEffect(() => {\n    const token = Cookies.get(\"auth_token\"); // Перевіряємо наявність токену при завантаженні\n    if (token) {\n      setUser({\n        token\n      });\n    }\n  }, []);\n  const login = userData => {\n    // Зберігаємо лише user у localStorage або інших сховищах\n    localStorage.setItem('user', JSON.stringify(userData));\n    setUser(userData);\n  };\n  const logout = () => {\n    localStorage.removeItem('user');\n    Cookies.remove(\"auth_token\"); // Вилучаємо токен з куків при виході\n    setUser(null);\n    navigate('/login');\n  };\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      user,\n      login,\n      logout,\n      checkToken\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n}\n_s(UserProvider, \"/48TlfV0adSMEvsbW2gk5sMeopI=\", false, function () {\n  return [useNavigate];\n});\n_c = UserProvider;\nvar _c;\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["createContext","useState","useEffect","useNavigate","Cookies","jsxDEV","_jsxDEV","UserContext","UserProvider","children","_s","user","setUser","navigate","checkToken","token","get","logout","login","userData","localStorage","setItem","JSON","stringify","removeItem","remove","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Program Files/WebstormProjects/soil_scout/web/src/contexts/UserContext.js"],"sourcesContent":["import { createContext, useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Cookies from 'js-cookie';\r\n\r\nexport const UserContext = createContext(null);\r\n\r\nexport function UserProvider({ children }) {\r\n    const [user, setUser] = useState(null);\r\n    const navigate = useNavigate();\r\n\r\n    // Приклад для перевірки наявності токену\r\n    const checkToken = () => {\r\n        const token = Cookies.get(\"auth_token\");  // Перевірка наявності куки\r\n        if (!token) {\r\n            logout();\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        const token = Cookies.get(\"auth_token\");  // Перевіряємо наявність токену при завантаженні\r\n        if (token) {\r\n            setUser({ token });\r\n        }\r\n    }, []);\r\n\r\n    const login = (userData) => {\r\n        // Зберігаємо лише user у localStorage або інших сховищах\r\n        localStorage.setItem('user', JSON.stringify(userData));\r\n        setUser(userData);\r\n    };\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem('user');\r\n        Cookies.remove(\"auth_token\");  // Вилучаємо токен з куків при виході\r\n        setUser(null);\r\n        navigate('/login');\r\n    };\r\n\r\n    return (\r\n        <UserContext.Provider value={{ user, login, logout, checkToken }}>\r\n            {children}\r\n        </UserContext.Provider>\r\n    );\r\n}\r\n"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC1D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,OAAO,MAAM,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhC,OAAO,MAAMC,WAAW,gBAAGP,aAAa,CAAC,IAAI,CAAC;AAE9C,OAAO,SAASQ,YAAYA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACvC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAMY,QAAQ,GAAGV,WAAW,CAAC,CAAC;;EAE9B;EACA,MAAMW,UAAU,GAAGA,CAAA,KAAM;IACrB,MAAMC,KAAK,GAAGX,OAAO,CAACY,GAAG,CAAC,YAAY,CAAC,CAAC,CAAE;IAC1C,IAAI,CAACD,KAAK,EAAE;MACRE,MAAM,CAAC,CAAC;MACR,OAAO,KAAK;IAChB;IACA,OAAO,IAAI;EACf,CAAC;EAGDf,SAAS,CAAC,MAAM;IACZ,MAAMa,KAAK,GAAGX,OAAO,CAACY,GAAG,CAAC,YAAY,CAAC,CAAC,CAAE;IAC1C,IAAID,KAAK,EAAE;MACPH,OAAO,CAAC;QAAEG;MAAM,CAAC,CAAC;IACtB;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMG,KAAK,GAAIC,QAAQ,IAAK;IACxB;IACAC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACJ,QAAQ,CAAC,CAAC;IACtDP,OAAO,CAACO,QAAQ,CAAC;EACrB,CAAC;EAED,MAAMF,MAAM,GAAGA,CAAA,KAAM;IACjBG,YAAY,CAACI,UAAU,CAAC,MAAM,CAAC;IAC/BpB,OAAO,CAACqB,MAAM,CAAC,YAAY,CAAC,CAAC,CAAE;IAC/Bb,OAAO,CAAC,IAAI,CAAC;IACbC,QAAQ,CAAC,QAAQ,CAAC;EACtB,CAAC;EAED,oBACIP,OAAA,CAACC,WAAW,CAACmB,QAAQ;IAACC,KAAK,EAAE;MAAEhB,IAAI;MAAEO,KAAK;MAAED,MAAM;MAAEH;IAAW,CAAE;IAAAL,QAAA,EAC5DA;EAAQ;IAAAmB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAE/B;AAACrB,EAAA,CAxCeF,YAAY;EAAA,QAEPL,WAAW;AAAA;AAAA6B,EAAA,GAFhBxB,YAAY;AAAA,IAAAwB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}